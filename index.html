<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notepad & Task Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500&display=swap" rel="stylesheet">
<style>
/* Styles omitted for brevity, use the same styles as your existing code */
</style>
</head>
<body>
<div class="container">
    <!-- Theme Toggle and Font Size Controls -->
    <button id="themeToggle">Switch to Dark Mode</button>
    <button id="increaseFontSize">+</button>
    <button id="decreaseFontSize">-</button>

    <!-- Notepad Container -->
    <div class="notepad-container" id="notepadContainer">
        <textarea id="notepad" placeholder="Write your notes here..."></textarea>
    </div>

    <!-- Task List -->
    <div class="task-container">
        <input type="text" id="taskInput" placeholder="Add a task" />
        <button id="addTaskButton">Add Task</button>
        <button id="clearAllButton">Clear All Tasks</button>
        <ul id="taskList" class="task-list"></ul>
    </div>

    <!-- Font Color Customization -->
    <div class="font-color-picker">
        <label for="fontColor">Font Color: </label>
        <input type="color" id="fontColor" value="#9DA8C4">
    </div>

    <!-- Timezone Display -->
    <div class="timezone-container" id="timezoneContainer">
        <div class="timezone" id="usPacific">US Pacific: Loading...</div>
        <div class="timezone" id="usMountain">US Mountain: Loading...</div>
        <div class="timezone" id="usCentral">US Central: Loading...</div>
        <div class="timezone" id="usEastern">US Eastern: Loading...</div>
        <div class="timezone" id="phPhilippines">PH Philippines: Loading...</div>
    </div>

    <!-- Template Save/Load buttons -->
    <button id="saveTemplateButton">Save Template</button>
    <button id="loadTemplateButton">Load Template</button>

    <!-- Template List Modal (hidden initially) -->
    <div id="templateListModal" style="display:none;">
        <ul id="templateList"></ul>
    </div>
</div>

<script>
// Add your existing script here and correct the following sections:

// Fixing the task list rendering
function renderTasks() {
    taskList.innerHTML = ''; // Clear task list
    tasks.forEach((task, index) => {
        const li = document.createElement('li');
        li.classList.add('task');
        li.innerHTML = `
            <input type="checkbox" ${task.completed ? 'checked' : ''} data-index="${index}" /> 
            <span style="text-decoration: ${task.completed ? 'line-through' : 'none'};">${task.text}</span> 
            <button class="deleteBtn" data-index="${index}">X</button>
        `;
        taskList.appendChild(li);
    });
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// Fixing template button functionality
const saveTemplateButton = document.getElementById('saveTemplateButton');
const loadTemplateButton = document.getElementById('loadTemplateButton');
const templateListModal = document.getElementById('templateListModal');
const templates = JSON.parse(localStorage.getItem('templates')) || [];
const templateList = document.getElementById('templateList');

saveTemplateButton.addEventListener('click', () => {
    const templateName = prompt("Enter a name for your template:");
    if (templateName) {
        const newTemplate = {
            name: templateName,
            noteContent: notepad.value,
            tasks: tasks
        };
        templates.push(newTemplate);
        localStorage.setItem('templates', JSON.stringify(templates));
        alert("Template saved!");
    }
});

loadTemplateButton.addEventListener('click', () => {
    templateListModal.style.display = 'block'; // Show modal
    renderTemplateList();  // Show templates in the list
});

// Render the template list
function renderTemplateList() {
    templateList.innerHTML = ''; // Clear existing list
    templates.forEach((template, index) => {
        const listItem = document.createElement('li');
        listItem.textContent = `${template.name} (Saved: ${template.savedAt})`;
        listItem.addEventListener('click', () => {
            loadTemplate(template);  // Load the selected template
            templateListModal.style.display = 'none';  // Close modal
        });
        templateList.appendChild(listItem);
    });
}

// Load the selected template
function loadTemplate(template) {
    notepad.value = template.noteContent;
    tasks = template.tasks;
    renderTasks();  // Render tasks from the loaded template
}

// Timezone Display Function
function updateTimezone() {
    const date = new Date();
    document.getElementById('usPacific').textContent = `US Pacific: ${date.toLocaleString('en-US', { timeZone: 'America/Los_Angeles' })}`;
    document.getElementById('usMountain').textContent = `US Mountain: ${date.toLocaleString('en-US', { timeZone: 'America/Denver' })}`;
    document.getElementById('usCentral').textContent = `US Central: ${date.toLocaleString('en-US', { timeZone: 'America/Chicago' })}`;
    document.getElementById('usEastern').textContent = `US Eastern: ${date.toLocaleString('en-US', { timeZone: 'America/New_York' })}`;
    document.getElementById('phPhilippines').textContent = `PH Philippines: ${date.toLocaleString('en-US', { timeZone: 'Asia/Manila' })}`;
}
setInterval(updateTimezone, 1000);

// Your existing logic for dark mode, font customization, etc., remains the same.
</script>
</body>
</html>
