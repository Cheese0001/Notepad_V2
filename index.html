<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad & Task Tracker Widget</title>
    <button id="increase-font" class="button">+</button>
    <button id="decrease-font" class="button">-</button>

    <style>
        /* Base Styles */
        body {
            font-family: 'Press Start 2P', sans-serif;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* Theme Styles */
        .dark-theme {
            background-color: #2e2e2e;
            color: white;
        }
        
        .light-theme {
            background-color: #ffffff;
            color: #333;
        }

        .container {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin: 10px;
            padding: 15px;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
        }

        .notepad-container, .task-container {
            background-color: #f5f5f5;
            margin-bottom: 20px;
            border-radius: 10px;
            padding: 10px;
        }

        .time-zone-container {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 10px;
        }

        .time-zone-box {
            background-color: #e0c3fc;
            border-radius: 5px;
            padding: 10px;
            width: 20%;
            text-align: center;
        }

        .button {
            background-color: #D0B0BD;
            border: none;
            color: white;
            padding: 5px 10px;
            font-size: 1rem;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
        }

        .button:hover {
            background-color: #DFB7CC;
        }

        .resize-handle {
            width: 15px;
            height: 15px;
            background-color: #9DA8C4;
            position: absolute;
            bottom: 5px;
            right: 5px;
            cursor: se-resize;
        }

        .toggle-container {
            position: absolute;
            bottom: 60px;
            left: 10px;
        }

        .collapsible {
            display: none;
        }

        /* Theme Toggle */
        .theme-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            padding: 10px;
            background-color: #9DA8C4;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Dark theme styling for readability */
        .dark-theme .notepad-container {
            background-color: #333;
            color: black;  /* Notepad text color in dark mode */
        }

        .dark-theme .task-container {
            background-color: #333;
            color: white;  /* Task text color in dark mode */
        }

        /* Increased font size */
        .large-font {
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="theme-button" onclick="toggleTheme()">Toggle Theme</div>

    <div id="mainContainer" class="container">
        <!-- Time Zone Container -->
        <div class="time-zone-container">
            <div class="time-zone-box" id="pacific-time">
                US Pacific: <span id="pacific"></span>
            </div>
            <div class="time-zone-box" id="mountain-time">
                US Mountain: <span id="mountain"></span>
            </div>
            <div class="time-zone-box" id="central-time">
                US Central: <span id="central"></span>
            </div>
            <div class="time-zone-box" id="philippines-time">
                Philippines: <span id="philippines"></span>
            </div>
        </div>

        <!-- Notepad Container -->
        <div class="notepad-container" id="notepad-container">
            <textarea id="notepad" placeholder="Write your notes here..." rows="10" style="width: 100%; font-size: 18px;"></textarea>
            <div class="resize-handle" id="resize-handle"></div>
        </div>

        <!-- Task Container -->
        <div class="task-container" id="task-container">
            <input type="text" id="task-input" placeholder="Enter task" style="width: 100%; padding: 5px; margin-bottom: 10px;">
            <ul id="task-list"></ul>
            <button class="button" onclick="addTask()">Add Task</button>
            <button class="button" onclick="clearTasks()">Clear All Tasks</button>
        </div>

        <!-- Font Color Customization -->
        <div class="toggle-container">
            <button class="button" onclick="changeFontColor('purple')">Purple Font</button>
            <button class="button" onclick="changeFontColor('pink')">Pink Font</button>
            <button class="button" onclick="changeFontColor('brown')">Brown Font</button>
        </div>
    </div>

    <script>
        // Initialize Theme and Font Color
        let isDarkMode = localStorage.getItem('theme') === 'dark';
        let currentFontColor = 'purple';
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let savedNotepad = localStorage.getItem('notepad') || '';

        // Handle Theme Toggle
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light'); // Store theme in localStorage
            document.body.className = isDarkMode ? 'dark-theme' : 'light-theme';
            document.getElementById('mainContainer').className = isDarkMode ? 'container dark-theme' : 'container light-theme';
        }

        // Handle Font Color Change
        function changeFontColor(color) {
            currentFontColor = color;
            document.getElementById('notepad').style.color = color;
            document.getElementById('task-container').style.color = color;
        }

        // Save Notepad Content
        document.getElementById('notepad').addEventListener('input', function() {
            localStorage.setItem('notepad', this.value);
        });

        // Set initial notepad value
        document.getElementById('notepad').value = savedNotepad;

        // Add Task Functionality
        function addTask() {
            const taskText = document.getElementById('task-input').value;
            if (taskText) {
                tasks.push({ text: taskText, completed: false });
                updateTaskList();
                document.getElementById('task-input').value = ''; // Clear input after adding
            }
        }

        // Update Task List
        function updateTaskList() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = '';
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span style="text-decoration: ${task.completed ? 'line-through' : 'none'}">${task.text}</span>
                    <button class="button" onclick="toggleTaskCompletion(${index})">âœ“</button>
                    <button class="button" onclick="deleteTask(${index})">X</button>
                `;
                taskList.appendChild(li);
            });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Toggle Task Completion
        function toggleTaskCompletion(index) {
            tasks[index].completed = !tasks[index].completed;
            updateTaskList();
        }

        // Delete Task
        function deleteTask(index) {
            tasks.splice(index, 1);
            updateTaskList();
        }

        // Clear All Tasks
        function clearTasks() {
            tasks = [];
            updateTaskList();
        }

        // Update Time Zones
        function updateTimeZones() {
            const options = { hour: '2-digit', minute: '2-digit', hour12: true };
            const pacific = new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles', ...options });
            const mountain = new Date().toLocaleString('en-US', { timeZone: 'America/Denver', ...options });
            const central = new Date().toLocaleString('en-US', { timeZone: 'America/Chicago', ...options });
            const philippines = new Date().toLocaleString('en-US', { timeZone: 'Asia/Manila', ...options });

            document.getElementById('pacific').textContent = pacific;
            document.getElementById('mountain').textContent = mountain;
            document.getElementById('central').textContent = central;
            document.getElementById('philippines').textContent = philippines;
        }

        // Call updateTimeZones function periodically
        setInterval(updateTimeZones, 1000); // Update every second
        updateTimeZones(); // Initial call

        // Handle Resizing Notepad
        const resizeHandle = document.getElementById('resize-handle');
        const notepadContainer = document.getElementById('notepad-container');

        resizeHandle.addEventListener('mousedown', function(e) {
            const initialWidth = notepadContainer.offsetWidth;
            const initialHeight = notepadContainer.offsetHeight;
            const initialX = e.clientX;
            const initialY = e.clientY;

            const onMouseMove = (moveEvent) => {
                const widthDiff = moveEvent.clientX - initialX;
                const heightDiff = moveEvent.clientY - initialY;
                notepadContainer.style.width = initialWidth + widthDiff + 'px';
                notepadContainer.style.height = initialHeight + heightDiff + 'px';
            };

            const onMouseUp = () => {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            };

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        });
    </script>
</body>
</html>
