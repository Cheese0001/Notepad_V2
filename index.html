const taskInput = document.getElementById('new-task');
const addTaskButton = document.getElementById('add-task');
const taskList = document.getElementById('task-list');
const clearTasksButton = document.getElementById('clear-tasks');

// Load saved tasks from local storage
document.addEventListener('DOMContentLoaded', () => {
    const savedTasks = JSON.parse(localStorage.getItem('tasks')) || [];
    savedTasks.forEach(task => {
        addTaskToList(task);
    });
});

// Add task to the list and local storage
addTaskButton.addEventListener('click', () => {
    if (taskInput.value.trim() !== '') {
        const newTask = taskInput.value.trim();
        addTaskToList(newTask);

        // Save task to local storage
        const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        tasks.push(newTask);
        localStorage.setItem('tasks', JSON.stringify(tasks));

        taskInput.value = ''; // Clear the input field
    }
});

// Function to add a task to the list
function addTaskToList(task) {
    const taskItem = document.createElement('li');
    taskItem.innerHTML = `
        <span class="task-text" contenteditable="true">${task}</span>
        <button onclick="deleteTask(this)">‚ùå</button>
    `;
    taskList.appendChild(taskItem);
}

// Delete a task
function deleteTask(button) {
    const taskItem = button.parentElement;
    taskItem.remove();

    // Remove the task from local storage
    const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    const taskIndex = Array.from(taskList.children).indexOf(taskItem);
    tasks.splice(taskIndex, 1);
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// Clear all tasks
clearTasksButton.addEventListener('click', () => {
    taskList.innerHTML = '';
    localStorage.removeItem('tasks');
});
